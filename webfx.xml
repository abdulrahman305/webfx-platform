<?xml version="1.0" encoding="UTF-8"?>
<project>

    <update-options>
        <generate-export-snapshot/>
    </update-options>

    <modules>
        <subdirectories-modules/>
    </modules>

    <maven-pom-manual>
        <properties>
            <!-- Disabling the default behavior defined in the parent pom for the shade plugin -->
            <plugin.shade.param.fat.phase>none</plugin.shade.param.fat.phase>
        </properties>

        <build>
            <pluginManagement>
                <plugins>
                    <!-- Relocating the emul.java package to java for both classes and sources -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-shade-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>shade</goal>
                                </goals>
                                <configuration>
                                    <shadedArtifactAttached>true</shadedArtifactAttached>
                                    <filters>
                                        <filter>
                                            <artifact>*:*</artifact>
                                            <includes>
                                                <include>emul/java/**</include>
                                                <include>public/**</include>
                                                <include>META-INF/maven/**</include>
                                            </includes>
                                        </filter>
                                    </filters>
                                    <relocations>
                                        <relocation>
                                            <pattern>emul.java</pattern>
                                            <shadedPattern>java</shadedPattern>
                                        </relocation>
                                    </relocations>
                                    <createSourcesJar>true</createSourcesJar>
                                    <shadeSourcesContent>true</shadeSourcesContent>
                                    <createDependencyReducedPom>false</createDependencyReducedPom>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </maven-pom-manual>

    <required-libraries>

        <webfx-library artifact="dev.webfx:webfx-parent:0.1.0-SNAPSHOT"/>

        <group>
            <groupId>org.gwtproject</groupId>

            <library name="gwt-user">
                <exported-packages>
                    <package>com.google.gwt.core.client</package>
                    <package>com.google.gwt.dom.client</package>
                    <package>com.google.gwt.media.client</package>
                    <package>com.google.gwt.regexp.shared</package>
                    <package>com.google.gwt.resources.client</package>
                    <package>com.google.gwt.storage.client</package>
                    <package>com.google.gwt.user.client</package>
                    <package>com.google.gwt.user.client.ui</package>
                </exported-packages>
            </library>

            <library name="gwt-dev"/>
        </group>

        <group>
            <groupId>com.google.elemental2</groupId>

            <library name="elemental2-core">
                <exported-packages>
                    <package>elemental2.core</package>
                </exported-packages>
            </library>

            <library name="elemental2-dom">
                <exported-packages>
                    <package>elemental2.dom</package>
                </exported-packages>
            </library>

            <library name="elemental2-svg">
                <exported-packages>
                    <package>elemental2.svg</package>
                </exported-packages>
            </library>

        </group>

        <group>
            <groupId>org.jresearch.gwt.time</groupId>

            <library name="gwt-time">
                <artifactId>org.jresearch.gwt.time</artifactId>
            </library>

            <library name="org.jresearch.gwt.time.tzdb"/>

        </group>

        <library name="java-nio-emul">
            <groupId>org.treblereel.gwt.nio</groupId>
            <artifactId>gwt-nio</artifactId>
            <version>1.1</version>
            <exported-packages>
                <package>java.nio</package>
                <package>java.nio.charset</package>
                <package>java.nio.file</package>
                <package>java.nio.file.attribute</package>
            </exported-packages>
        </library>

        <library name="jsinterop-annotations">
            <exported-packages>
                <package>jsinterop.annotations</package>
            </exported-packages>
        </library>

        <library name="jsinterop-base">
            <exported-packages>
                <package>jsinterop.base</package>
            </exported-packages>
        </library>
    
    </required-libraries>

    <!--

     ******************************************************************************************************************* 
     ******************************* Section managed by WebFX (DO NOT EDIT MANUALLY) *********************************** 
     ******************************************************************************************************************* 

     <export-snapshot> allows a much faster import of this WebFX library into another project. It's a self-contained
     image of this and children modules. All information required for the import of this library is present in this
     single file. The export snapshot is optional, and a WebFX library that doesn't generate it can still be imported
     into another project, but WebFX will then need to download all individual webfx.xml files for every children
     modules, together with their pom and sources. Knowing that each download requires a maven invocation that takes
     at least 3s (sometimes 10s or more), the export snapshot brings a significant performance improvement in the
     import process.

     -->

    <export-snapshot>

        <project name="webfx-platform">

            <modules>
                <module>webfx-platform-boot</module>
                <module>webfx-platform-boot-gwt</module>
                <module>webfx-platform-boot-java</module>
                <module>webfx-platform-console</module>
                <module>webfx-platform-console-gwt</module>
                <module>webfx-platform-console-java</module>
                <module>webfx-platform-emul-javabase-gwt</module>
                <module>webfx-platform-resource</module>
                <module>webfx-platform-resource-gwt</module>
                <module>webfx-platform-resource-java</module>
                <module>webfx-platform-scheduler</module>
                <module>webfx-platform-scheduler-java</module>
                <module>webfx-platform-shutdown</module>
                <module>webfx-platform-shutdown-gwt</module>
                <module>webfx-platform-shutdown-java</module>
                <module>webfx-platform-storage</module>
                <module>webfx-platform-storage-gwt</module>
                <module>webfx-platform-storage-java</module>
                <module>webfx-platform-uischeduler</module>
                <module>webfx-platform-uischeduler-gwt</module>
                <module>webfx-platform-util</module>
            </modules>

            <required-libraries>

                <webfx-library artifact="dev.webfx:webfx-parent:0.1.0-SNAPSHOT"/>

                <group>
                    <groupId>org.gwtproject</groupId>

                    <library name="gwt-user">
                        <exported-packages>
                            <package>com.google.gwt.core.client</package>
                            <package>com.google.gwt.dom.client</package>
                            <package>com.google.gwt.media.client</package>
                            <package>com.google.gwt.regexp.shared</package>
                            <package>com.google.gwt.resources.client</package>
                            <package>com.google.gwt.storage.client</package>
                            <package>com.google.gwt.user.client</package>
                            <package>com.google.gwt.user.client.ui</package>
                        </exported-packages>
                    </library>

                    <library name="gwt-dev"/>
                </group>

                <group>
                    <groupId>com.google.elemental2</groupId>

                    <library name="elemental2-core">
                        <exported-packages>
                            <package>elemental2.core</package>
                        </exported-packages>
                    </library>

                    <library name="elemental2-dom">
                        <exported-packages>
                            <package>elemental2.dom</package>
                        </exported-packages>
                    </library>

                    <library name="elemental2-svg">
                        <exported-packages>
                            <package>elemental2.svg</package>
                        </exported-packages>
                    </library>

                </group>

                <group>
                    <groupId>org.jresearch.gwt.time</groupId>

                    <library name="gwt-time">
                        <artifactId>org.jresearch.gwt.time</artifactId>
                    </library>

                    <library name="org.jresearch.gwt.time.tzdb"/>

                </group>

                <library name="java-nio-emul">
                    <groupId>org.treblereel.gwt.nio</groupId>
                    <artifactId>gwt-nio</artifactId>
                    <version>1.1</version>
                    <exported-packages>
                        <package>java.nio</package>
                        <package>java.nio.charset</package>
                        <package>java.nio.file</package>
                        <package>java.nio.file.attribute</package>
                    </exported-packages>
                </library>

                <library name="jsinterop-annotations">
                    <exported-packages>
                        <package>jsinterop.annotations</package>
                    </exported-packages>
                </library>

                <library name="jsinterop-base">
                    <exported-packages>
                        <package>jsinterop.base</package>
                    </exported-packages>
                </library>
    
            </required-libraries>

        </project>

        <project name="webfx-platform-boot">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.boot.spi.ApplicationModuleBooter">dev.webfx.platform.boot.spi.impl.ApplicationJobsBooter</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.boot</package>
                <package>dev.webfx.platform.boot.spi</package>
                <package>dev.webfx.platform.boot.spi.impl</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-console</module>
                <module>webfx-platform-shutdown</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.boot.spi.ApplicationBooterProvider</required-service>
                <optional-service>dev.webfx.platform.boot.spi.ApplicationModuleBooter</optional-service>
                <optional-service>dev.webfx.platform.boot.spi.ApplicationJob</optional-service>
            </used-services>

        </project>

        <project name="webfx-platform-boot-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <providers>
                <provider interface="dev.webfx.platform.boot.spi.ApplicationBooterProvider">dev.webfx.platform.boot.spi.impl.gwt.GwtApplicationBooterProvider</provider>
            </providers>

            <source-packages>
                <package>dev.webfx.platform.boot.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>gwt-user</module>
                <module>webfx-platform-boot</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-boot-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.boot.spi.ApplicationBooterProvider">dev.webfx.platform.boot.spi.impl.java.JavaApplicationBooterProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.boot.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>webfx-platform-boot</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-console">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.console</package>
                <package>dev.webfx.platform.console.spi</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.console.spi.ConsoleProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-console-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.console.spi.ConsoleProvider">dev.webfx.platform.console.spi.impl.gwt.GwtConsoleProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.console.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>webfx-platform-console</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-console-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.console.spi.ConsoleProvider">dev.webfx.platform.console.spi.impl.java.JavaConsoleProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.console.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>webfx-platform-console</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-emul-javabase-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <html if-uses-java-package="java.util.regex">
                <body order="-1">
                    <script charset="utf-8" src="emul/java/util/regex/xregexp.js" type="text/javascript"/>
                </body>
            </html>

            <source-packages>
                <package>emul.java.lang.ref</package>
                <package>emul.java.util</package>
                <package>emul.java.util.regex</package>
            </source-packages>

            <used-by-source-modules>
                <module>gwt-user</module>
                <module>java.base</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-resource">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.resource</package>
                <package>dev.webfx.platform.resource.spi</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.resource.spi.ResourceProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-resource-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.boot.spi.ApplicationModuleBooter">dev.webfx.platform.resource.spi.impl.gwt.GwtResourceModuleBooter</provider>
                <provider interface="dev.webfx.platform.resource.spi.ResourceProvider">dev.webfx.platform.resource.spi.impl.gwt.GwtResourceProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.resource.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>gwt-user</module>
                <module>java.base</module>
                <module>webfx-platform-boot</module>
                <module>webfx-platform-console</module>
                <module>webfx-platform-resource</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <optional-service>dev.webfx.platform.resource.spi.impl.gwt.GwtResourceBundle</optional-service>
            </used-services>

        </project>

        <project name="webfx-platform-resource-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.resource.spi.ResourceProvider">dev.webfx.platform.resource.spi.impl.java.JavaResourceProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.resource.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-resource</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-scheduler">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.scheduler</package>
                <package>dev.webfx.platform.scheduler.spi</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.scheduler.spi.SchedulerProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-scheduler-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.scheduler.spi.SchedulerProvider">dev.webfx.platform.scheduler.spi.impl.java.JavaSchedulerProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.scheduler.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-console</module>
                <module>webfx-platform-scheduler</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-shutdown">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.shutdown</package>
                <package>dev.webfx.platform.shutdown.spi</package>
                <package>dev.webfx.platform.shutdown.spi.impl</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.shutdown.spi.ShutdownProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-shutdown-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.shutdown.spi.ShutdownProvider">dev.webfx.platform.shutdown.spi.impl.gwt.GwtShutdownProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.shutdown.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>elemental2-dom</module>
                <module>webfx-platform-shutdown</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-shutdown-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.shutdown.spi.ShutdownProvider">dev.webfx.platform.shutdown.spi.impl.java.JavaShutdownProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.shutdown.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>webfx-platform-shutdown</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-storage">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.storage</package>
                <package>dev.webfx.platform.storage.spi</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.storage.spi.LocalStorageProvider</required-service>
                <required-service>dev.webfx.platform.storage.spi.SessionStorageProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-storage-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.storage.spi.LocalStorageProvider">dev.webfx.platform.storage.spi.impl.gwt.GwtLocalStorageProvider</provider>
                <provider interface="dev.webfx.platform.storage.spi.SessionStorageProvider">dev.webfx.platform.storage.spi.impl.gwt.GwtSessionStorageProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.storage.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>gwt-user</module>
                <module>java.base</module>
                <module>webfx-platform-storage</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-storage-java">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.storage.spi.LocalStorageProvider">dev.webfx.platform.storage.spi.impl.java.JavaLocalStorageProvider</provider>
                <provider interface="dev.webfx.platform.storage.spi.SessionStorageProvider">dev.webfx.platform.storage.spi.impl.java.JavaSessionStorageProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.storage.spi.impl.java</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-storage</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-uischeduler">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.uischeduler</package>
                <package>dev.webfx.platform.uischeduler.spi</package>
                <package>dev.webfx.platform.uischeduler.spi.impl</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>webfx-platform-scheduler</module>
                <module>webfx-platform-util</module>
            </used-by-source-modules>

            <used-services>
                <required-service>dev.webfx.platform.uischeduler.spi.UiSchedulerProvider</required-service>
            </used-services>

        </project>

        <project name="webfx-platform-uischeduler-gwt">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <providers>
                <provider interface="dev.webfx.platform.scheduler.spi.SchedulerProvider">dev.webfx.platform.uischeduler.spi.impl.gwt.GwtUiSchedulerProvider</provider>
                <provider interface="dev.webfx.platform.uischeduler.spi.UiSchedulerProvider">dev.webfx.platform.uischeduler.spi.impl.gwt.GwtUiSchedulerProvider</provider>
            </providers>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.uischeduler.spi.impl.gwt</package>
            </source-packages>

            <used-by-source-modules>
                <module>elemental2-dom</module>
                <module>gwt-user</module>
                <module>webfx-platform-console</module>
                <module>webfx-platform-scheduler</module>
                <module>webfx-platform-uischeduler</module>
            </used-by-source-modules>

        </project>

        <project name="webfx-platform-util">

            <exported-packages>
                <source-packages/>
            </exported-packages>

            <dependencies>
                <used-by-source-modules/>
            </dependencies>

            <source-packages>
                <package>dev.webfx.platform.util</package>
                <package>dev.webfx.platform.util.collection</package>
                <package>dev.webfx.platform.util.function</package>
                <package>dev.webfx.platform.util.noreflect</package>
                <package>dev.webfx.platform.util.serviceloader</package>
                <package>dev.webfx.platform.util.tuples</package>
                <package>dev.webfx.platform.util.uuid</package>
            </source-packages>

            <used-by-source-modules>
                <module>java.base</module>
                <module>java.logging</module>
            </used-by-source-modules>

        </project>

        <usages>

            <java-package name="java.util.regex"/>

        </usages>

    </export-snapshot>

</project>